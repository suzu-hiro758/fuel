<html lang="ja">
  <head>
    <meta charset="utf8" />
    <meta name="robots" content="noindex">
    <title>suzu-hiro note</title>
    <link rel="shortcut icon" href="../../favicon.png">
    <link rel="stylesheet" type="text/css" href="../assets/css/common.css">
    <link rel="stylesheet" type="text/css" href="./css_animation.css">

    <link href="../lib/prism/prism.css" rel="stylesheet" /> 
    <script src="../assets/js/main.js"></script>
    <style>
      :root {
        interpolate-size: allow-keywords;
      }
      .option {
        display: flex;
        margin-block: 1rem;
        gap: 1rem;
        flex-direction: column;
        .r-group {
          padding-block: 4px;
          display: flex;
          gap: 8px;
          flex-wrap: wrap;
          label {
            cursor: pointer;
          }
        }
      }
      #dialog {
        width: 400px;
        border-radius: 5px;
        border: 1px solid #888;
        padding: 0;
        &::backdrop {
          background-color: rgba(0 0 0 / .05);
        }
        header {
          padding: 4px 12px;
          border-radius: 5px 5px 0 0;
          background: #ddd;
        }
        .content {
          padding-inline: 12px;
          padding-block: 4px 8px;
          margin: 0;
          display: flex;

          flex-direction: column;
          overflow: hidden;
          button {
            align-self: flex-end;
            width: fit-content;
          }
        }
      }

      /**
       * fade
       */

       /** open */
      #dialog.fade[open] {
        animation: openFade .3s ease-out forwards;
      }
      @keyframes openFade {
        from { opacity: 0; transform: scale(0.9); }
        to {  opacity: 1; transform: scale(1);  }
      }

      /** close */
      #dialog.fade {
        animation: closeFade .3s ease-out forwards;
      }
      @keyframes closeFade {
        from { display: block; opacity: 1; transform: scale(1); }
        to { display: none; opacity: 0; transform: scale(0.9);  }
      }

      /**
       * 2-step
       */


      /** open */
      #dialog.two-step[open] {
        width: 50px;
        animation: open2step .3s ease-out forwards;
        header {
          border-radius: 5px 5px 5px 5px;
          animation: open2stepHeader .3s ease-out forwards;
        }
        .content {
          height: 0;
          animation: open2stepForm .3s ease-out .3s forwards;
        }
      }
      @keyframes open2step {
        from { opacity: 0; transform: scale(0.9); width: 50px; }
        to { opacity: 1; transform: scale(1); width: 400px;  }
      }
      @keyframes open2stepHeader {
        100% { border-radius: 5px 5px 0 0; }
      }
      @keyframes open2stepForm {
        from { opacity: 0; height: 0px; padding-block: 0; }
        to { opacity: 1; height: auto; padding-block: 4px 8px; }
      }

      /** close */
      #dialog.two-step {
        animation: close2step .3s ease-out .3s forwards;
        header {
          animation: close2stepHeader .3s ease-out forwards;
        }
        .content {
          animation: close2stepForm .3s ease-out forwards;
        }
      }
      @keyframes close2step {
        from { display: block; opacity: 1; transform: scale(1); width: 400px;  }
        to { display: none; opacity: 0; transform: scale(0.9); width: 50px; }
      }
      @keyframes close2stepHeader {
        100% { border-radius: 5px 5px 5px 5px; }
      }
      @keyframes close2stepForm {
        from { display: block; opacity: 1; height: auto; padding-block: 4px 8px; }
        to { display: none; opacity: 0; height: 0px; padding-block: 0; }
      }

    </style>
  </head>
  <body>
    <h1 class="title">css animation dialog <a href="../sample.html">TOP</a></h1>
    <main>
      <button id="open" commandfor="dialog" command="show-modal">開く</button>

      <section class="option">
        <fieldset>
          <legend>アニメーション種別</legend>
          <div class="r-group">
          </div>
        </fieldset>
      </section>
    </main>
    <dialog id="dialog" class="fade">
      <header>ヘッダー</header>
      <section class="content">
        <p>
          テキスト<br/>
          テキスト
        </p>
        <button commandfor="dialog" command="close">閉じる</button>
      </section>
    </dialog>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const dialog = document.getElementById('dialog')
        const radioGroup = document.querySelector('.r-group');
        const types = ['fade', 'two-step']
        const defaultType = types[0]

        types.forEach(type => {
          const label = document.createElement('label')
          const input = document.createElement('input')
          input.type = "radio";
          input.name = "animetion-type";
          input.value = type;
          input.checked = type === defaultType
          label.append(input)
          label.append(type)
          radioGroup.append(label)
          input.addEventListener('change', () => {
            dialog.className = type;
          })
        })
      })
    </script>
    <script src="../lib/prism/prism.js"></script>
  </body>
</html>